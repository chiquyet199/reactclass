<html>

<head>
  <title>Homework Calculate years until retirement</title>
</head>

<body>
  Your Gender
  <select class="gender">
    <option value="Male"> Male </option>
    <option value="Female"> Female </option>
  </select> <br>
  <input class="yearOfBirth" type="number" placeholder="Please input your year of birth"></input>

  <button class="yearsUntilRetirement">Years until your retirement </button>
  <p>Years until your retirement is</p>
  <p id='result'></p>
  <button class="ageAnimal">Your age and animal designation</button>
  <script>
    const yobEl = document.querySelector('.yearOfBirth')
    const genderEl = document.querySelector('.gender')
    const calculateYearsBtn = document.querySelector('.yearsUntilRetirement')
    const calculateAnimalYearBtn = document.querySelector('.ageAnimal')

    calculateYearsBtn.addEventListener('click', function () {
        if(yobEl.value === '') return

        const year = Number(yobEl.value)
        const gender = genderEl.value
        const yearsUntilRetirement = getYearsUntilRetirement(year, gender)
        const message = yearsUntilRetirement > 0 
            ? `There are ${yearsUntilRetirement} until your retiment`
            : `You already retiment`
        document.getElementById("result").innerHTML = message
    })

    function getYearsUntilRetirement(yob, gender){
        if(isNaN(yob)) return

        const userAge = calculateAge(yob)
        const maxAgeRetirement = gender === 'Male' ? 65 : 60
        
        return maxAgeRetirement - userAge
    }

    // calculateYearsBtn.addEventListener('click', function () {
    //   const year = yobEl.value
    //   const gender = genderEl.value
    //   const currentYear = today.getFullYear()
    //   const maxAgeOfMaleRetirement = 65
    //   const maxAgeOfFemaleRetirement = 60
    //   if (year === "" || year > currentYear) {
    //     alert('Invalid. Please check your input');
    //     return
    //   }
    //   const userAge = currentYear - year
    //   if ((gender === "Male" && userAge > maxAgeOfMaleRetirement) || (gender === "Female" && userAge > maxAgeOfFemaleRetirement)) {
    //     alert('Retired already. Enjoy your retirement!');
    //     return;
    //   }
    //   if (gender === "Male") {
    //     document.getElementById("result").innerHTML = (maxAgeOfMaleRetirement - userAge) + ' years'
    //   } else {
    //     document.getElementById("result").innerHTML = (maxAgeOfFemaleRetirement - userAge) + ' years'
    //   }
    // })

    calculateAnimalYearBtn.addEventListener('click', function () {
      if(yobEl.value === '') return

      const year = Number(yobEl.value)
      const age = calculateAge(year)
      const animalAge = getAnimalAge(year)
      alert((age) + ' years ' + animalAge)
    })

    function calculateAge(yob){
      if(isNaN(yob)) return

      const today = new Date()
      const currentYear = today.getFullYear()
      return currentYear - yob
    }

    function getAnimalAge(yob){
      if(isNaN(yob)) return

      const animals = ['Than', 'Dau', 'Tuat', 'Hoi', 'Ti', 'Suu', 'Dan', 'Meo', 'Thin', 'Ty', 'Ngo', 'Mui']
      const index = yob % 12
      return animals[index]
    }
  
  </script>
</body>

</html>